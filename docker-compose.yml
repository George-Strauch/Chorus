services:
  bot:
    build:
      context: .
      args:
        UID: ${HOST_UID:-1000}
        GID: ${HOST_GID:-1000}
        DOCKER_GID: ${DOCKER_GID:-999}
        GIT_COMMIT: ${GIT_COMMIT:-unknown}
    env_file: .env
    environment:
      HOST_SCOPE_PATH: ${SCOPE_PATH:-${HOME}}
      HOST_USER: ${HOST_USER:-${USER}}
    pid: host
    privileged: true
    volumes:
      - ${HOME}/.chorus-agents:/home/appuser/.chorus-agents
      - ${SCOPE_PATH:-${HOME}}:/mnt/host
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped
